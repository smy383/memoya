# 다중 채팅방 기능 구현 계획

## 구현 작업 목록

- [ ] 1. 데이터 모델 및 타입 정의
  - 새로운 ChatRoom, 수정된 ChatMessage, Memo 인터페이스 정의
  - 타입 안전성을 위한 TypeScript 인터페이스 작성
  - _요구사항: 1.1, 2.1_

- [ ] 2. 데이터 마이그레이션 시스템 구현
  - 기존 데이터를 새로운 구조로 변환하는 마이그레이션 함수 작성
  - 버전 체크 및 마이그레이션 상태 관리 로직 구현
  - 마이그레이션 실패 시 롤백 메커니즘 구현
  - _요구사항: 6.1, 6.2, 6.3_

- [ ] 3. 채팅방 관리 훅 구현
  - useChatRooms 훅 생성 (CRUD 기능)
  - 채팅방 생성, 수정, 삭제, 조회 기능 구현
  - AsyncStorage를 사용한 채팅방 데이터 영속성 관리
  - _요구사항: 1.2, 1.3, 4.2_

- [ ] 4. 채팅방별 데이터 관리 훅 수정
  - 기존 useChat을 useChatRoom으로 리팩토링
  - roomId 기반 메시지 필터링 및 저장 로직 구현
  - 채팅방별 메모 상태 추적 기능 구현
  - _요구사항: 2.1, 2.2, 2.3_

- [ ] 5. 채팅방 목록 화면 구현
  - ChatRoomsListScreen 컴포넌트 생성
  - 채팅방 목록 표시 및 새 채팅방 생성 UI 구현
  - 각 채팅방의 미리보기 정보 표시 기능 구현
  - _요구사항: 1.1, 1.4_

- [ ] 6. 채팅방 아이템 컴포넌트 구현
  - ChatRoomItem 컴포넌트 생성
  - 채팅방 제목, 마지막 메시지, 시간 표시 기능 구현
  - 스와이프 액션 및 컨텍스트 메뉴 기능 구현
  - _요구사항: 1.4, 5.3_

- [ ] 7. 채팅방 제목 편집 기능 구현
  - 인라인 제목 편집 UI 구현
  - 제목 유효성 검사 및 저장 로직 구현
  - 편집 모드 전환 및 취소 기능 구현
  - _요구사항: 3.1, 3.2, 3.4_

- [ ] 8. 채팅방 삭제 기능 구현
  - 삭제 확인 다이얼로그 구현
  - 채팅방 및 관련 데이터 완전 삭제 로직 구현
  - 마지막 채팅방 삭제 방지 로직 구현
  - _요구사항: 4.1, 4.2, 4.4_

- [ ] 9. 채팅방 화면 리팩토링
  - ChatScreenRefactored를 ChatRoomScreen으로 변경
  - roomId props 처리 및 채팅방별 데이터 로딩 구현
  - 채팅방 헤더 및 네비게이션 기능 구현
  - _요구사항: 2.3, 5.1, 5.2_

- [ ] 10. 네비게이션 구조 업데이트
  - 스택 네비게이터 추가 및 라우팅 설정
  - 채팅방 목록과 개별 채팅방 간 네비게이션 구현
  - 뒤로 가기 및 딥링크 처리 구현
  - _요구사항: 5.1, 5.2_

- [ ] 11. AI 도구 시스템 수정
  - MemoTools의 모든 함수에 roomId 매개변수 추가
  - 채팅방별 메모 필터링 로직 적용
  - AI 컨텍스트를 현재 채팅방으로 제한하는 로직 구현
  - _요구사항: 2.4, 2.5_

- [ ] 12. 메모 화면 업데이트
  - MemosScreen에서 채팅방별 메모 필터링 구현
  - 채팅방 선택 드롭다운 또는 탭 기능 추가
  - 메모와 채팅방 연결 표시 기능 구현
  - _요구사항: 2.2, 2.5_

- [ ] 13. 데이터 마이그레이션 테스트 및 검증
  - 기존 사용자 데이터 마이그레이션 시나리오 테스트
  - 마이그레이션 전후 데이터 무결성 검증
  - 에러 케이스 및 롤백 시나리오 테스트
  - _요구사항: 6.1, 6.2, 6.3, 6.4_

- [ ] 14. 성능 최적화 및 메모리 관리
  - 채팅방별 데이터 지연 로딩 구현
  - 메모리 사용량 최적화 및 가비지 컬렉션 개선
  - 대용량 채팅방 처리를 위한 페이지네이션 구현
  - _요구사항: 2.1, 2.3_

- [ ] 15. 사용자 경험 개선
  - 로딩 상태 및 스켈레톤 UI 구현
  - 에러 처리 및 사용자 피드백 메시지 구현
  - 접근성 및 키보드 네비게이션 지원 추가
  - _요구사항: 5.1, 5.2, 5.4_

- [ ] 16. 통합 테스트 및 버그 수정
  - 전체 플로우 통합 테스트 실행
  - 채팅방 간 데이터 격리 검증
  - 발견된 버그 수정 및 코드 리뷰
  - _요구사항: 모든 요구사항 검증_